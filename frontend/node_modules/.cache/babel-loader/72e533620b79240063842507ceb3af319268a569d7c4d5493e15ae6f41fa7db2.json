{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://agentops-api-1081133763032.us-central1.run.app';\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add auth token to requests\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('agentops_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\nexport const apiService = {\n  // Authentication\n  async login(email, password) {\n    const response = await apiClient.post('/auth/login', {\n      email,\n      password\n    });\n    return response.data;\n  },\n  async register(email, password, fullName) {\n    const response = await apiClient.post('/auth/register', {\n      email,\n      password,\n      full_name: fullName\n    });\n    return response.data;\n  },\n  // Agent Registration (Minimal backend - no auth required)\n  async registerAgent(name, metadata) {\n    const response = await apiClient.post('/register', {\n      name,\n      metadata\n    });\n    return response.data;\n  },\n  // API Keys - Using proper database-backed endpoints\n  async createApiKeys(name) {\n    const response = await apiClient.post('/api-keys/', {\n      name\n    });\n    return {\n      id: response.data.id,\n      name: response.data.name,\n      key: response.data.key,\n      created_at: response.data.created_at,\n      is_active: response.data.active\n    };\n  },\n  async getApiKeys() {\n    const response = await apiClient.get('/api-keys/');\n    return response.data.map(key => ({\n      id: key.id,\n      name: key.name,\n      key: key.key_preview,\n      // Backend returns masked key\n      created_at: key.created_at,\n      last_used: key.last_used_at,\n      is_active: key.active\n    }));\n  },\n  async deleteApiKey(keyId) {\n    const response = await apiClient.delete(`/api-keys/${keyId}`);\n    return response.data;\n  },\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n  async getEvaluationStats(days = 7, agent_name) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: {\n              'X-API-Key': apiKey\n            }\n          });\n\n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n\n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: {\n        'X-API-Key': apiKey\n      }\n    });\n    return response.data;\n  },\n  // Get agent stats from GCP\n  async getAgentStats(agentId) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  }\n};\nexport default apiService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","apiService","login","email","password","response","post","data","register","fullName","full_name","registerAgent","name","metadata","createApiKeys","id","key","created_at","is_active","active","getApiKeys","get","map","key_preview","last_used","last_used_at","deleteApiKey","keyId","delete","getEvaluations","params","getEvaluationStats","days","agent_name","storedKeys","keys","JSON","parse","length","agentId","apiKey","total_evaluations","total_evals","total_hallucinations","hallucination_rate","avg_hallucination_prob","avg_latency","avg_throughput","avg_semantic_drift","avg_uncertainty","avg_factual_support","err","console","error","uploadMetrics","evaluation","getAgentStats","healthCheck"],"sources":["C:/Users/ezaza/Desktop/gentops/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://agentops-api-1081133763032.us-central1.run.app';\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add auth token to requests\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('agentops_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport const apiService = {\n  // Authentication\n  async login(email: string, password: string) {\n    const response = await apiClient.post('/auth/login', { email, password });\n    return response.data;\n  },\n\n  async register(email: string, password: string, fullName: string) {\n    const response = await apiClient.post('/auth/register', { \n      email, \n      password, \n      full_name: fullName \n    });\n    return response.data;\n  },\n\n  // Agent Registration (Minimal backend - no auth required)\n  async registerAgent(name: string, metadata?: any) {\n    const response = await apiClient.post('/register', { name, metadata });\n    return response.data;\n  },\n\n  // API Keys - Using proper database-backed endpoints\n  async createApiKeys(name: string) {\n    const response = await apiClient.post('/api-keys/', { name });\n    return {\n      id: response.data.id,\n      name: response.data.name,\n      key: response.data.key,\n      created_at: response.data.created_at,\n      is_active: response.data.active\n    };\n  },\n\n  async getApiKeys() {\n    const response = await apiClient.get('/api-keys/');\n    return response.data.map((key: any) => ({\n      id: key.id,\n      name: key.name,\n      key: key.key_preview, // Backend returns masked key\n      created_at: key.created_at,\n      last_used: key.last_used_at,\n      is_active: key.active\n    }));\n  },\n\n  async deleteApiKey(keyId: string) {\n    const response = await apiClient.delete(`/api-keys/${keyId}`);\n    return response.data;\n  },\n\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params?: {\n    limit?: number;\n    offset?: number;\n    agent_name?: string;\n    hallucinated?: boolean;\n    start_date?: string;\n    end_date?: string;\n  }) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n\n  async getEvaluationStats(days: number = 7, agent_name?: string) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        \n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: { 'X-API-Key': apiKey }\n          });\n          \n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n    \n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation: any) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: { 'X-API-Key': apiKey }\n    });\n    return response.data;\n  },\n\n  // Get agent stats from GCP\n  async getAgentStats(agentId: string) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  },\n};\n\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}