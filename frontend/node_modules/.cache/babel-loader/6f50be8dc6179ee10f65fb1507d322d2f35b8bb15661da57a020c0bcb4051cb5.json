{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080';\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Minimal backend doesn't use JWT tokens, uses API keys instead\n// No auth interceptor needed\n\nexport const apiService = {\n  // Authentication - Not used in minimal backend\n  async login(email, password) {\n    throw new Error('Authentication not available in minimal backend. Use API keys instead.');\n  },\n  async register(email, password, fullName) {\n    throw new Error('User registration not available in minimal backend. Use API keys instead.');\n  },\n  // Agent Registration (Minimal backend - creates agent and returns API key)\n  async registerAgent(name, metadata) {\n    const response = await apiClient.post('/register', {\n      name,\n      metadata\n    });\n    return response.data;\n  },\n  // API Keys - Using minimal backend /register endpoint\n  async createApiKeys(name) {\n    // Minimal backend uses /register endpoint\n    const response = await apiClient.post('/register', {\n      name\n    });\n    return {\n      id: response.data.agent_id,\n      name: name,\n      key: response.data.api_key,\n      created_at: new Date().toISOString(),\n      is_active: true\n    };\n  },\n  async getApiKeys() {\n    // For minimal backend, get from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      return JSON.parse(storedKeys);\n    }\n    return [];\n  },\n  async deleteApiKey(keyId) {\n    // For minimal backend, remove from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      const updatedKeys = keys.filter(k => k.id !== keyId);\n      localStorage.setItem('agentops_api_keys', JSON.stringify(updatedKeys));\n    }\n    return {\n      success: true\n    };\n  },\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n  async getEvaluationStats(days = 7, agent_name) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: {\n              'X-API-Key': apiKey\n            }\n          });\n\n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n\n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: {\n        'X-API-Key': apiKey\n      }\n    });\n    return response.data;\n  },\n  // Get agent stats from GCP\n  async getAgentStats(agentId) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  }\n};\nexport default apiService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","apiService","login","email","password","Error","register","fullName","registerAgent","name","metadata","response","post","data","createApiKeys","id","agent_id","key","api_key","created_at","Date","toISOString","is_active","getApiKeys","storedKeys","localStorage","getItem","JSON","parse","deleteApiKey","keyId","keys","updatedKeys","filter","k","setItem","stringify","success","getEvaluations","params","getEvaluationStats","days","agent_name","length","agentId","apiKey","get","total_evaluations","total_evals","total_hallucinations","hallucination_rate","avg_hallucination_prob","avg_latency","avg_throughput","avg_semantic_drift","avg_uncertainty","avg_factual_support","err","console","error","uploadMetrics","evaluation","getAgentStats","healthCheck"],"sources":["C:/Users/ezaza/Desktop/gentops/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080';\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Minimal backend doesn't use JWT tokens, uses API keys instead\n// No auth interceptor needed\n\nexport const apiService = {\n  // Authentication - Not used in minimal backend\n  async login(email: string, password: string) {\n    throw new Error('Authentication not available in minimal backend. Use API keys instead.');\n  },\n\n  async register(email: string, password: string, fullName: string) {\n    throw new Error('User registration not available in minimal backend. Use API keys instead.');\n  },\n\n  // Agent Registration (Minimal backend - creates agent and returns API key)\n  async registerAgent(name: string, metadata?: any) {\n    const response = await apiClient.post('/register', { name, metadata });\n    return response.data;\n  },\n\n  // API Keys - Using minimal backend /register endpoint\n  async createApiKeys(name: string) {\n    // Minimal backend uses /register endpoint\n    const response = await apiClient.post('/register', { name });\n    return {\n      id: response.data.agent_id,\n      name: name,\n      key: response.data.api_key,\n      created_at: new Date().toISOString(),\n      is_active: true\n    };\n  },\n\n  async getApiKeys() {\n    // For minimal backend, get from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      return JSON.parse(storedKeys);\n    }\n    return [];\n  },\n\n  async deleteApiKey(keyId: string) {\n    // For minimal backend, remove from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      const updatedKeys = keys.filter((k: any) => k.id !== keyId);\n      localStorage.setItem('agentops_api_keys', JSON.stringify(updatedKeys));\n    }\n    return { success: true };\n  },\n\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params?: {\n    limit?: number;\n    offset?: number;\n    agent_name?: string;\n    hallucinated?: boolean;\n    start_date?: string;\n    end_date?: string;\n  }) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n\n  async getEvaluationStats(days: number = 7, agent_name?: string) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        \n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: { 'X-API-Key': apiKey }\n          });\n          \n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n    \n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation: any) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: { 'X-API-Key': apiKey }\n    });\n    return response.data;\n  },\n\n  // Get agent stats from GCP\n  async getAgentStats(agentId: string) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  },\n};\n\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}