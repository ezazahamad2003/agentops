{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://agentops-api-1081133763032.us-central1.run.app';\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add auth token to requests\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('agentops_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\nexport const apiService = {\n  // Authentication\n  async login(email, password) {\n    const response = await apiClient.post('/auth/login', {\n      email,\n      password\n    });\n    return response.data;\n  },\n  async register(email, password, fullName) {\n    const response = await apiClient.post('/auth/register', {\n      email,\n      password,\n      full_name: fullName\n    });\n    return response.data;\n  },\n  // Agent Registration (Minimal backend - no auth required)\n  async registerAgent(name, metadata) {\n    const response = await apiClient.post('/register', {\n      name,\n      metadata\n    });\n    return response.data;\n  },\n  // API Keys - Using minimal backend's register endpoint\n  async createApiKeys(name) {\n    // Minimal backend: register creates an agent and returns api_key\n    const response = await apiClient.post('/register', {\n      name,\n      metadata: {\n        created_from: 'frontend',\n        user: localStorage.getItem('agentops_user')\n      }\n    });\n\n    // Transform response to match expected format\n    return {\n      id: response.data.agent_id,\n      name: name,\n      key: response.data.api_key,\n      created_at: new Date().toISOString(),\n      is_active: true\n    };\n  },\n  async getApiKeys() {\n    // Minimal backend doesn't have list endpoint\n    // Return stored keys from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    return storedKeys ? JSON.parse(storedKeys) : [];\n  },\n  async deleteApiKey(keyId) {\n    const token = localStorage.getItem('agentops_token');\n    const response = await apiClient.delete(`/auth/api-keys/${keyId}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    return response.data;\n  },\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n  async getEvaluationStats(days = 7, agent_name) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: {\n              'X-API-Key': apiKey\n            }\n          });\n\n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n\n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: {\n        'X-API-Key': apiKey\n      }\n    });\n    return response.data;\n  },\n  // Get agent stats from GCP\n  async getAgentStats(agentId) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  }\n};\nexport default apiService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","apiService","login","email","password","response","post","data","register","fullName","full_name","registerAgent","name","metadata","createApiKeys","created_from","user","id","agent_id","key","api_key","created_at","Date","toISOString","is_active","getApiKeys","storedKeys","JSON","parse","deleteApiKey","keyId","delete","getEvaluations","params","getEvaluationStats","days","agent_name","keys","length","agentId","apiKey","get","total_evaluations","total_evals","total_hallucinations","hallucination_rate","avg_hallucination_prob","avg_latency","avg_throughput","avg_semantic_drift","avg_uncertainty","avg_factual_support","err","console","error","uploadMetrics","evaluation","getAgentStats","healthCheck"],"sources":["C:/Users/ezaza/Desktop/gentops/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { ApiKey, Evaluation, EvaluationStats } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://agentops-api-1081133763032.us-central1.run.app';\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add auth token to requests\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('agentops_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport const apiService = {\n  // Authentication\n  async login(email: string, password: string) {\n    const response = await apiClient.post('/auth/login', { email, password });\n    return response.data;\n  },\n\n  async register(email: string, password: string, fullName: string) {\n    const response = await apiClient.post('/auth/register', { \n      email, \n      password, \n      full_name: fullName \n    });\n    return response.data;\n  },\n\n  // Agent Registration (Minimal backend - no auth required)\n  async registerAgent(name: string, metadata?: any) {\n    const response = await apiClient.post('/register', { name, metadata });\n    return response.data;\n  },\n\n  // API Keys - Using minimal backend's register endpoint\n  async createApiKeys(name: string) {\n    // Minimal backend: register creates an agent and returns api_key\n    const response = await apiClient.post('/register', { \n      name,\n      metadata: { created_from: 'frontend', user: localStorage.getItem('agentops_user') }\n    });\n    \n    // Transform response to match expected format\n    return {\n      id: response.data.agent_id,\n      name: name,\n      key: response.data.api_key,\n      created_at: new Date().toISOString(),\n      is_active: true\n    };\n  },\n\n  async getApiKeys() {\n    // Minimal backend doesn't have list endpoint\n    // Return stored keys from localStorage\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    return storedKeys ? JSON.parse(storedKeys) : [];\n  },\n\n  async deleteApiKey(keyId: string) {\n    const token = localStorage.getItem('agentops_token');\n    const response = await apiClient.delete(`/auth/api-keys/${keyId}`,\n      { headers: { 'Authorization': `Bearer ${token}` } }\n    );\n    return response.data;\n  },\n\n  // Evaluations - Minimal backend uses /stats/{agent_id}\n  async getEvaluations(params?: {\n    limit?: number;\n    offset?: number;\n    agent_name?: string;\n    hallucinated?: boolean;\n    start_date?: string;\n    end_date?: string;\n  }) {\n    // Minimal backend doesn't have list evaluations endpoint\n    // Return empty array for now\n    return [];\n  },\n\n  async getEvaluationStats(days: number = 7, agent_name?: string) {\n    // Minimal backend uses /stats/{agent_id} with X-API-Key header\n    const storedKeys = localStorage.getItem('agentops_api_keys');\n    if (storedKeys) {\n      const keys = JSON.parse(storedKeys);\n      if (keys.length > 0) {\n        const agentId = keys[0].id;\n        const apiKey = keys[0].key;\n        \n        try {\n          const response = await apiClient.get(`/stats/${agentId}`, {\n            headers: { 'X-API-Key': apiKey }\n          });\n          \n          // Transform minimal backend response to expected format\n          const data = response.data;\n          return {\n            total_evaluations: data.total_evals || 0,\n            total_hallucinations: data.total_hallucinations || 0,\n            hallucination_rate: data.avg_hallucination_prob || 0,\n            avg_latency: data.avg_latency || 0,\n            avg_throughput: data.avg_throughput || 0,\n            avg_semantic_drift: 0,\n            avg_uncertainty: 0,\n            avg_factual_support: 0\n          };\n        } catch (err) {\n          console.error('Error fetching stats:', err);\n          // Return default stats on error\n        }\n      }\n    }\n    \n    // Return default stats if no agent or error\n    return {\n      total_evaluations: 0,\n      total_hallucinations: 0,\n      hallucination_rate: 0,\n      avg_latency: 0,\n      avg_throughput: 0,\n      avg_semantic_drift: 0,\n      avg_uncertainty: 0,\n      avg_factual_support: 0\n    };\n  },\n\n  // Upload metrics to GCP backend\n  async uploadMetrics(evaluation: any) {\n    const apiKey = localStorage.getItem('agentops_api_key');\n    const response = await apiClient.post('/metrics', evaluation, {\n      headers: { 'X-API-Key': apiKey }\n    });\n    return response.data;\n  },\n\n  // Get agent stats from GCP\n  async getAgentStats(agentId: string) {\n    const response = await apiClient.get(`/stats/${agentId}`);\n    return response.data;\n  },\n\n  // Health check\n  async healthCheck() {\n    const response = await apiClient.get('/health');\n    return response.data;\n  },\n};\n\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}